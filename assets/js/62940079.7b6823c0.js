"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4078],{3905:(e,t,n)=>{n.d(t,{kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,g=d["".concat(l,".").concat(m)]||d[m]||c[m]||i;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,o[1]=s;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9649:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var a=n(7462),r=(n(7294),n(3905));const i={},o="Using the queue manager in external TypeScript projects",s={unversionedId:"queue-manager/advanced_usage/external_ts",id:"queue-manager/advanced_usage/external_ts",title:"Using the queue manager in external TypeScript projects",description:"Using the queue manager in external TypeScript projects is slightly difficult as TypeScript does not know of the type for the global variable queueManager. Additionally, using the interface functions will make the tests fail as the global is not defined.",source:"@site/docs/queue-manager/advanced_usage/external_ts.md",sourceDirName:"queue-manager/advanced_usage",slug:"/queue-manager/advanced_usage/external_ts",permalink:"/nexus-scripts/docs/queue-manager/advanced_usage/external_ts",draft:!1,editUrl:"https://github.com/keneanung/nexus-scripts/edit/development/website/docs/queue-manager/advanced_usage/external_ts.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Basic Usage",permalink:"/nexus-scripts/docs/queue-manager/basic_usage"},next:{title:"API",permalink:"/nexus-scripts/docs/queue-manager/api"}},l={},u=[],p={toc:u},c="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(c,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"using-the-queue-manager-in-external-typescript-projects"},"Using the queue manager in external TypeScript projects"),(0,r.kt)("p",null,"Using the queue manager in external TypeScript projects is slightly difficult as TypeScript does not know of the type for the global variable ",(0,r.kt)("inlineCode",{parentName:"p"},"queueManager"),". Additionally, using the interface functions will make the tests fail as the global is not defined."),(0,r.kt)("p",null,"Solving the first issue is relatively straight forward as we need to ",(0,r.kt)("inlineCode",{parentName:"p"},"declare")," the variable so TypeScript knows of it. First install the package ",(0,r.kt)("inlineCode",{parentName:"p"},"@keneanung/nexus-queue-manager")," (i.e. through a terminal):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @keneanung/nexus-queue-manager\n")),(0,r.kt)("p",null,"Then add the following to the top of the ",(0,r.kt)("inlineCode",{parentName:"p"},"src/index.ts")," file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'import { IQueueManager } from "@keneanung/nexus-queue-manager";\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var queueManager: IQueueManager\n};\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"eslint-disable-next-line")," is there to prevent the ESLint rule ",(0,r.kt)("inlineCode",{parentName:"p"},"no-var")," from complaining about the global variable. But we need to declare it as ",(0,r.kt)("inlineCode",{parentName:"p"},"var")," to be able to assign it in tests."),(0,r.kt)("p",null,"To make the tests work, the easiest way would be to install the npm package ",(0,r.kt)("inlineCode",{parentName:"p"},"jest-mock-extended")," as a development dependency and use it like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"import { mock } from 'jest-mock-extended';\nimport { IQueueManager } from '@keneanung/nexus-queue-manager';\n\nglobalThis.queueManager = mock<IQueueManager>();\n")),(0,r.kt)("p",null,"Now, the object exists with all functions implemented as ",(0,r.kt)("inlineCode",{parentName:"p"},"jest.fn()"),"s. Please refer to ",(0,r.kt)("a",{parentName:"p",href:"https://jestjs.io/docs/mock-functions"},"the Jest documentation")," on how to test interactions."))}d.isMDXComponent=!0}}]);