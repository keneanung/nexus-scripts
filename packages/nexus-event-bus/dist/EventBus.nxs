{"name":"eventbus","enabled":true,"description":"Event Bus similar to the Nexus function system, but available outside of the GUI","type":"group","id":1,"items":[{"type":"function","name":"onLoad","enabled":true,"id":2,"code":"const original_run_function = run_function;\n\nconst event_queue = [\n    { event: \"onLoad\", args: {} },\n]\n\nconsole.log('Overwriting run_function');\n\nrun_function = (name, args, pkg) => {\n    if(globalThis.eventBus === undefined){\n        event_queue.push({event: name, args: args});\n    } else {\n    \tglobalThis.eventBus.raise(name, args);\n    }\n    original_run_function(name, args, pkg);\n}\n\nconsole.log('run_function is overwritten');\n\n$.getScript('http://keneanung.github.io/nexus.event-bus/dist/bundle.js', async () => {\n    console.log('re-running all missed events...');\n    for(const event in event_queue){\n        await globalThis.eventBus.raise(event.event, event.args);\n    }\n    console.log('done with missed events');\n})"}]}